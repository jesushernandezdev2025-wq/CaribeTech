<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CaribeTech - InnovaciÃ³n digital en LatinoamÃ©rica. Soluciones tecnolÃ³gicas modernas y escalables.">
  <meta name="keywords" content="tecnologÃ­a, innovaciÃ³n, LatinoamÃ©rica, soluciones digitales">
  <meta name="author" content="CaribeTech">
  <title>CaribeTech - InnovaciÃ³n Digital en LatinoamÃ©rica</title>

  <!-- PreconexiÃ³n para mejorar rendimiento -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">

  <!-- Estilos -->
  <link rel="stylesheet" href="../css/style-index-valentin.css">

  <!-- Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://caribetech.com/">
  <meta property="og:title" content="CaribeTech - InnovaciÃ³n Digital">
  <meta property="og:description" content="Impulsando la tecnologÃ­a en LatinoamÃ©rica con soluciones innovadoras">
  <meta property="og:image" content="../img/CaribeTech - Logo.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://caribetech.com/">
  <meta property="twitter:title" content="CaribeTech - InnovaciÃ³n Digital">
  <meta property="twitter:description" content="Impulsando la tecnologÃ­a en LatinoamÃ©rica con soluciones innovadoras">
  <meta property="twitter:image" content="../img/CaribeTech - Logo.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../img/Logos/Favicon Web.png">
</head>

<body>

  <!-- HEADER -->
  <header class="header" role="banner">
    <div class="logo">
      <a href="inicio.html" aria-label="CaribeTech Inicio">
        <img src="../img/SanValentin/CaribeTech - Valentin.png" alt="Logo CaribeTech" width="180" height="50" loading="lazy">
      </a>
    </div>

    <nav class="nav" role="navigation" aria-label="NavegaciÃ³n principal">
      <ul>
        <li><a href="inicio.html" class="active" aria-current="page">Inicio</a></li>
        <li><a href="sobre-nosotros.html">Sobre Nosotros</a></li>
        <li><a href="app.html">Aplicaciones</a></li>
        <li><a href="tiktok.html">TikTok</a></li>
        <li><a href="contacto.html">Contacto</a></li>
        <li><a href="pronto.html">Tools</a></li>
      </ul>
    </nav>

    <!-- BotÃ³n menÃº mÃ³vil (mejora accesibilidad) -->
    <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero" role="banner">
      <div class="hero-content">
        <h1>Impulsando la tecnologÃ­a en LatinoamÃ©rica</h1>
        <p>CaribeTech es la marca matriz que conecta innovaciÃ³n, confianza y crecimiento digital en la regiÃ³n.</p>
        <a href="app.html" class="btn btn-primary" role="button">Explora nuestras aplicaciones</a>
      </div>
 <!-- Capas de efectos -->
  <div class="snow"></div>
  <div class="trees-falling"></div>
  <div class="fireworks">
  <div class="firework"></div>
  <div class="firework delay1"></div>
  <div class="firework delay2"></div>
</div>


      <!-- Elemento decorativo adicional -->
      <div class="hero-decoration" aria-hidden="true"></div>

      <!-- CONTENEDOR DE WIDGETS FIJOS EN EL HERO -->
<div class="hero-widgets">

  <!-- WIDGET DE CLIMA -->
  <div class="clima-toggle">
    <button id="climaBtn" aria-haspopup="true" aria-expanded="false">
      â›… RD: <span id="tempPrincipal">--Â°C</span>
    </button>

    <div class="clima-menu" id="climaMenu" role="menu" aria-hidden="true">
      <button data-lat="18.4861" data-lon="-69.9312" data-code="RD" data-flag="ğŸ‡©ğŸ‡´">ğŸ‡©ğŸ‡´ RepÃºblica Dominicana</button>
      <button data-lat="18.2208" data-lon="-66.5901" data-code="PR" data-flag="ğŸ‡µğŸ‡·">ğŸ‡µğŸ‡· Puerto Rico</button>
      <button data-lat="23.1136" data-lon="-82.3666" data-code="CU" data-flag="ğŸ‡¨ğŸ‡º">ğŸ‡¨ğŸ‡º Cuba</button>
      <button data-lat="10.6667" data-lon="-61.5167" data-code="TT" data-flag="ğŸ‡¹ğŸ‡¹">ğŸ‡¹ğŸ‡¹ Trinidad y Tobago</button>
      <button data-lat="9.0000" data-lon="-79.5000" data-code="PA" data-flag="ğŸ‡µğŸ‡¦">ğŸ‡µğŸ‡¦ PanamÃ¡</button>
      <button data-lat="4.7110" data-lon="-74.0721" data-code="CO" data-flag="ğŸ‡¨ğŸ‡´">ğŸ‡¨ğŸ‡´ Colombia</button>
      <button data-lat="12.0464" data-lon="-77.0428" data-code="PE" data-flag="ğŸ‡µğŸ‡ª">ğŸ‡µğŸ‡ª PerÃº</button>
      <button data-lat="19.4326" data-lon="-99.1332" data-code="MX" data-flag="ğŸ‡²ğŸ‡½">ğŸ‡²ğŸ‡½ MÃ©xico</button>
    </div>
  </div>

  <!-- WIDGET DE HORA -->
  <div class="timezone-toggle" id="timezoneWidget" aria-live="polite">
    <button id="timezoneBtn" aria-haspopup="true" aria-expanded="false">
      ğŸ•’ <span id="tzAbbr">RD</span>: <span id="currentTime">--:--:--</span>
    </button>

    <div class="timezone-menu" id="timezoneMenu" role="menu" aria-hidden="true">
      <button data-tz="America/Santo_Domingo" data-abbr="RD">ğŸ‡©ğŸ‡´ RepÃºblica Dominicana</button>
      <button data-tz="America/Puerto_Rico" data-abbr="PR">ğŸ‡µğŸ‡· Puerto Rico</button>
      <button data-tz="America/Havana" data-abbr="CU">ğŸ‡¨ğŸ‡º Cuba</button>
      <button data-tz="America/Port_of_Spain" data-abbr="TT">ğŸ‡¹ğŸ‡¹ Trinidad y Tobago</button>
      <button data-tz="America/Panama" data-abbr="PA">ğŸ‡µğŸ‡¦ PanamÃ¡</button>
      <button data-tz="America/Bogota" data-abbr="CO">ğŸ‡¨ğŸ‡´ Colombia</button>
      <button data-tz="America/Lima" data-abbr="PE">ğŸ‡µğŸ‡ª PerÃº</button>
      <button data-tz="America/Mexico_City" data-abbr="MX">ğŸ‡²ğŸ‡½ MÃ©xico</button>
    </div>
  </div>

  <!-- BOTÃ“N DE MÃšSICA -->
 <!-- <button id="music-btn" class="music-toggle" aria-label="Activar mÃºsica navideÃ±a">
    ğŸ„ MÃºsica
  </button>-->

</div>

    </section>

    <!-- FEATURES -->
    <section class="features" aria-labelledby="features-heading">
      <div class="container">
        <h2 id="features-heading">Nuestros pilares</h2>

        <div class="feature-grid">
          <article class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-lightbulb fa-2x" aria-hidden="true"></i>
            </div>
            <h3>InnovaciÃ³n</h3>
            <p>Soluciones modernas y escalables para tÃ©cnicos y usuarios.</p>
            <a href="innovaciÃ³n.html" class="feature-link" aria-label="MÃ¡s sobre InnovaciÃ³n">Saber mÃ¡s â†’</a>
          </article>

          <article class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-shield-alt fa-2x" aria-hidden="true"></i>
            </div>
            <h3>Confianza</h3>
            <p>Construimos reputaciÃ³n y seguridad en cada interacciÃ³n.</p>
            <a href="confianza.html" class="feature-link" aria-label="MÃ¡s sobre Confianza">Saber mÃ¡s â†’</a>
          </article>

          <article class="feature-card">
            <div class="feature-icon">
              <i class="fas fa-chart-line fa-2x" aria-hidden="true"></i>
            </div>
            <h3>Crecimiento</h3>
            <p>Impulsamos el desarrollo profesional en toda LatinoamÃ©rica.</p>
            <a href="crecimiento.html" class="feature-link" aria-label="MÃ¡s sobre Crecimiento">Saber mÃ¡s â†’</a>
          </article>
        </div>
      </div>
    </section>

    <!-- SecciÃ³n de Testimonios -->
<section class="testimonials">
  <div class="testimonials-container">
    <h2 class="section-title">Lo que opinan nuestros clientes</h2>

    <div class="testimonials-grid">
      <blockquote class="testimonial-card">
        <p class="testimonial-text">
          â€œâ€
        </p>
        <cite class="testimonial-author">â€” Nuevos comentarios, pronto.</cite>
      </blockquote>

      <blockquote class="testimonial-card">
        <p class="testimonial-text">
          â€œâ€
        </p>
        <cite class="testimonial-author">â€” Nuevos comentarios, pronto.</cite>
      </blockquote>
    </div>
  </div>
</section>

  <!-- FOOTER -->
  <footer class="footer" role="contentinfo">
    <div class="footer-content">
      <div class="footer-section">
        <h3>SÃ­guenos</h3>
        <div class="social-links" role="list" aria-label="Redes sociales">
          <a href="https://www.instagram.com/caribetech_do/" target="_blank" rel="noopener noreferrer" aria-label="Instagram de CaribeTech">
            <i class="fab fa-instagram" aria-hidden="true"></i>
          </a>
          <a href="https://www.tiktok.com/@repara_rd" target="_blank" rel="noopener noreferrer" aria-label="TikTok de CaribeTech">
            <i class="fab fa-tiktok"></i>
          </a>
        </div>
      </div>

      <div class="footer-section">
        <h3>Enlaces rÃ¡pidos</h3>
        <nav aria-label="Enlaces del pie de pÃ¡gina">
          <ul>
            <p><a href="privacidad.html">PolÃ­tica de privacidad</a></p>
          </ul>
        </nav>
      </div>
    </div>

    <div class="footer-bottom">
      <p><a href="contacto.html">ContÃ¡ctanos</a></p>
      <p>&copy; 2025 CaribeTech. Todos los derechos reservados.</p>
    </div>
  </footer>


<!-- AUDIO -->
<audio id="navidad-audio" src="/audio/navidad.mp3" preload="auto" loop></audio>

<!-- Tu script general (solo UNA VEZ) -->
<script src="../js/script.js" defer></script>

<!-- Script: widget hora y botÃ³n de mÃºsica -->
<script>
  // --- Widget de hora ---
  (function () {
  const tzBtn = document.getElementById('timezoneBtn');
  const tzMenu = document.getElementById('timezoneMenu');
  const tzTime = document.getElementById('currentTime');
  const tzAbbr = document.getElementById('tzAbbr');

  let currentTZ = 'America/Santo_Domingo';
  let currentAbbr = 'RD';
  let intervalId = null;

  function formatTime(tz) {
    return new Intl.DateTimeFormat('es-DO', {
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: false,
      timeZone: tz
    }).format(new Date());
  }

  function startClock(tz) {
    if (intervalId) clearInterval(intervalId);

    tzTime.textContent = formatTime(tz);

    intervalId = setInterval(() => {
      tzTime.textContent = formatTime(tz);
    }, 1000);
  }

  // Inicializar
  startClock(currentTZ);

  // Abrir/cerrar menÃº
  tzBtn.addEventListener('click', (e) => {
    const open = tzMenu.style.display === 'block';
    tzMenu.style.display = open ? 'none' : 'block';
    tzBtn.setAttribute('aria-expanded', !open);
    e.stopPropagation();
  });

  // SelecciÃ³n de paÃ­s
  tzMenu.querySelectorAll('button[data-tz]').forEach(btn => {
    btn.addEventListener('click', () => {
      const tz = btn.dataset.tz;
      const abbr = btn.dataset.abbr;

      currentTZ = tz;
      currentAbbr = abbr;

      tzAbbr.textContent = abbr;

      startClock(tz);

      tzMenu.style.display = 'none';
      tzBtn.setAttribute('aria-expanded', false);
    });
  });

  // Cerrar si se hace clic fuera
  document.addEventListener('click', (e) => {
    if (!tzMenu.contains(e.target) && e.target !== tzBtn) {
      tzMenu.style.display = 'none';
      tzBtn.setAttribute('aria-expanded', false);
    }
  });
})();

// <!-- ======== BOTON DE MUSICA NAVIDEÃ‘A ======== -->
// (function () {
//   const audio = document.getElementById('navidad-audio');
//   const btn = document.getElementById('music-btn');
//   let playing = false;
//
//   // Desactivar autoplay real
//   audio.autoplay = false;
//
//   audio.volume = 0.7;
//
//   btn.addEventListener('click', () => {
//     if (!playing) {
//       audio.play().catch(() => {});
//       btn.textContent = 'â¸ï¸ Pausar mÃºsica';
//       playing = true;
//     } else {
//       audio.pause();
//       btn.textContent = 'ğŸ„ MÃºsica';
//       playing = false;
//     }
//   });
// })();

  async function obtenerClima(lat, lon) {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
  const res = await fetch(url);
  const data = await res.json();
  return data.current_weather.temperature;
}

const climaBtn = document.getElementById("climaBtn");
const climaMenu = document.getElementById("climaMenu");
const tempPrincipal = document.getElementById("tempPrincipal");

// Abrir menÃº
climaBtn.addEventListener("click", () => {
  const open = climaMenu.style.display === "block";
  climaMenu.style.display = open ? "none" : "block";
});

// Cerrar si clic fuera
document.addEventListener("click", (e) => {
  if (!climaBtn.contains(e.target) && !climaMenu.contains(e.target)) {
    climaMenu.style.display = "none";
  }
});

// Al iniciar: poner clima de RD automÃ¡ticamente
(async () => {
  const rdTemp = await obtenerClima(18.4861, -69.9312);
  tempPrincipal.textContent = `${rdTemp}Â°C`;
})();

// Cuando selecciones un paÃ­s
climaMenu.querySelectorAll("button").forEach(btn => {
  btn.addEventListener("click", async () => {
    const lat = btn.dataset.lat;
    const lon = btn.dataset.lon;
    const code = btn.dataset.code;
    const flag = btn.dataset.flag;

    const temp = await obtenerClima(lat, lon);

    // Cambiar el botÃ³n principal
    climaBtn.innerHTML = `${flag} ${code}: <span>${temp}Â°C</span>`;

    // Cerrar menÃº
    climaMenu.style.display = "none";
  });
});

const HORARIO = { apertura: 8, cierre: 23 }; // â† pon tu horario real aquÃ­

</script>

<!-- ============================================================
     CARIBETECH â€” WIDGET DE SOPORTE EN VIVO
     Pega este bloque completo antes del </body> de tu inicio.html
     AsegÃºrate de que inicio.html estÃ© en la misma carpeta que dashboard.html
     ============================================================ -->

<!-- â”€â”€ ESTILOS DEL WIDGET â”€â”€ -->
<style>
  :root {
    --ct-bg: #0b1a2e;
    --ct-header: #082030;
    --ct-border: rgba(0,200,180,0.2);
    --ct-accent: #00c8b4;
    --ct-text: #e8f4f2;
    --ct-muted: #5a8a84;
    --ct-user-bubble: #0d2a3e;
    --ct-agent-bubble: rgba(0,200,180,0.1);
    --ct-input-bg: rgba(0,200,180,0.06);
  }

  #ct-widget {
    position: fixed;
    bottom: 28px;
    right: 28px;
    z-index: 99999999999999;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 14px;
    font-family: 'DM Sans', system-ui, sans-serif;
  }

  /* â”€â”€ Ventana del chat â”€â”€ */
  #ct-window {
    width: 340px;
    height: 520px;
    background: var(--ct-bg);
    border: 1px solid var(--ct-border);
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.7), 0 0 0 1px rgba(0,200,180,0.04);
    display: none;
    flex-direction: column;
    overflow: hidden;
    transform-origin: bottom right;
  }

  #ct-window.ct-open {
    display: flex;
    animation: ct-popIn 0.25s cubic-bezier(.34,1.56,.64,1);
  }

  @keyframes ct-popIn {
    from { transform: scale(0.85) translateY(12px); opacity: 0; }
    to   { transform: scale(1) translateY(0); opacity: 1; }
  }

  /* Header */
  .ct-header {
    background: var(--ct-header);
    padding: 14px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid var(--ct-border);
    flex-shrink: 0;
  }

  .ct-avatar {
    width: 40px; height: 40px;
    background: linear-gradient(135deg, var(--ct-accent), #0070ff);
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 14px; color: #fff;
    flex-shrink: 0;
    font-family: system-ui, sans-serif;
  }

  .ct-header-info h4 {
    font-size: 14px; font-weight: 700; color: #fff; margin: 0;
  }

  .ct-header-info p {
    font-size: 11px; color: var(--ct-muted); margin: 2px 0 0;
    display: flex; align-items: center; gap: 5px;
  }

  .ct-status-dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: #2ecc71; box-shadow: 0 0 6px #2ecc71;
    flex-shrink: 0;
  }
  .ct-status-dot.closed { background: #e74c3c; box-shadow: 0 0 6px #e74c3c; }

  .ct-close-btn {
    margin-left: auto; background: none; border: none;
    color: var(--ct-muted); cursor: pointer; font-size: 18px;
    line-height: 1; padding: 4px; transition: color 0.2s;
  }
  .ct-close-btn:hover { color: #fff; }

  /* Body scrollable */
  .ct-body {
    flex: 1; overflow-y: auto; padding: 16px;
    display: flex; flex-direction: column; gap: 10px;
  }
  .ct-body::-webkit-scrollbar { width: 4px; }
  .ct-body::-webkit-scrollbar-thumb { background: var(--ct-border); border-radius: 2px; }

  /* â”€â”€ Paso 1: Nombre â”€â”€ */
  #ct-name-step {
    display: flex; flex-direction: column; align-items: center;
    justify-content: center; height: 100%; padding: 20px;
    text-align: center; gap: 12px;
  }

  #ct-name-step .ct-welcome-icon { font-size: 40px; }

  #ct-name-step h3 {
    font-size: 16px; font-weight: 700; color: #fff; margin: 0;
  }

  #ct-name-step p {
    font-size: 13px; color: var(--ct-muted); line-height: 1.6; margin: 0;
  }

  #ct-name-input {
    width: 100%; padding: 11px 14px;
    background: var(--ct-input-bg); border: 1px solid var(--ct-border);
    border-radius: 10px; color: var(--ct-text);
    font-size: 14px; outline: none; text-align: center;
    transition: border-color 0.2s; font-family: inherit;
  }
  #ct-name-input:focus { border-color: var(--ct-accent); }
  #ct-name-input::placeholder { color: var(--ct-muted); }

  #ct-start-btn {
    width: 100%; padding: 12px;
    background: linear-gradient(135deg, var(--ct-accent), #00a896);
    border: none; border-radius: 10px;
    color: #000; font-size: 14px; font-weight: 700;
    cursor: pointer; transition: transform 0.15s;
    font-family: inherit;
    box-shadow: 0 4px 16px rgba(0,200,180,0.3);
  }
  #ct-start-btn:hover { transform: scale(1.02); }

  /* â”€â”€ Paso 2: Chat â”€â”€ */
  #ct-chat-step {
    display: none; flex-direction: column; height: 100%;
  }

  .ct-messages {
    flex: 1; overflow-y: auto;
    display: flex; flex-direction: column; gap: 8px; padding: 2px 0;
  }
  .ct-messages::-webkit-scrollbar { width: 3px; }
  .ct-messages::-webkit-scrollbar-thumb { background: var(--ct-border); border-radius: 2px; }

  .ct-msg-wrap {
    display: flex; flex-direction: column;
  }
  .ct-msg-wrap.user { align-items: flex-end; }
  .ct-msg-wrap.agent { align-items: flex-start; }

  .ct-bubble {
    max-width: 82%; padding: 9px 13px; border-radius: 14px;
    font-size: 13px; line-height: 1.5; word-break: break-word; color: var(--ct-text);
  }
  .ct-bubble.user {
    background: var(--ct-user-bubble); border-bottom-right-radius: 4px;
    border: 1px solid rgba(0,100,150,0.3);
  }
  .ct-bubble.agent {
    background: var(--ct-agent-bubble); border-bottom-left-radius: 4px;
    border: 1px solid rgba(0,200,180,0.15);
  }

  .ct-msg-time {
    font-size: 10px; color: var(--ct-muted);
    margin-top: 2px; padding: 0 2px;
  }
  .ct-msg-wrap.user .ct-msg-time { text-align: right; }

  /* Typing indicator */
  .ct-typing {
    display: none; align-self: flex-start;
    background: var(--ct-agent-bubble);
    border: 1px solid rgba(0,200,180,0.15);
    padding: 10px 14px; border-radius: 14px; border-bottom-left-radius: 4px;
  }
  .ct-typing span {
    display: inline-block; width: 6px; height: 6px;
    background: var(--ct-accent); border-radius: 50%;
    margin: 0 2px; animation: ct-bob 1.2s infinite;
  }
  .ct-typing span:nth-child(2) { animation-delay: 0.2s; }
  .ct-typing span:nth-child(3) { animation-delay: 0.4s; }

  @keyframes ct-bob {
    0%,80%,100% { transform: translateY(0); opacity:0.5; }
    40%          { transform: translateY(-6px); opacity:1; }
  }

  /* Soporte cerrado */
  #ct-closed-msg {
    display: none; flex-direction: column; align-items: center;
    justify-content: center; height: 100%;
    gap: 12px; text-align: center; padding: 20px;
  }
  #ct-closed-msg .ct-closed-icon { font-size: 40px; }
  #ct-closed-msg h3 { font-size: 15px; font-weight: 700; color: #fff; margin: 0; }
  #ct-closed-msg p  { font-size: 13px; color: var(--ct-muted); line-height: 1.6; margin: 0; }

  /* â”€â”€ Input area â”€â”€ */
  .ct-input-area {
    padding: 12px 14px; border-top: 1px solid var(--ct-border);
    display: none; gap: 8px; align-items: center;
    flex-shrink: 0; background: var(--ct-header);
  }

  .ct-input-area input {
    flex: 1; background: var(--ct-input-bg);
    border: 1px solid var(--ct-border); border-radius: 10px;
    padding: 10px 14px; color: var(--ct-text);
    font-size: 13px; outline: none; font-family: inherit;
    transition: border-color 0.2s;
  }
  .ct-input-area input:focus { border-color: var(--ct-accent); }
  .ct-input-area input::placeholder { color: var(--ct-muted); }

  .ct-send-btn {
    width: 38px; height: 38px; flex-shrink: 0;
    background: linear-gradient(135deg, var(--ct-accent), #00a896);
    border: none; border-radius: 10px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.15s;
  }
  .ct-send-btn:hover { transform: scale(1.08); }
  .ct-send-btn svg {
    width: 16px; height: 16px; stroke: #000; fill: none;
    stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round;
  }

  /* â”€â”€ FAB â”€â”€ */
  #ct-fab {
    width: 58px; height: 58px;
    background: linear-gradient(135deg, var(--ct-accent), #00a896);
    border: none; border-radius: 50%; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 8px 30px rgba(0,200,180,0.4);
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
  }
  #ct-fab:hover { transform: scale(1.1); box-shadow: 0 12px 36px rgba(0,200,180,0.5); }
  #ct-fab svg {
    width: 26px; height: 26px; stroke: #000; fill: none;
    stroke-width: 2; stroke-linecap: round; stroke-linejoin: round;
  }

  #ct-unread-badge {
    position: absolute; top: -4px; right: -4px;
    width: 20px; height: 20px; background: #ff5c6a;
    border-radius: 50%; font-size: 11px; font-weight: 700;
    color: #fff; display: none;
    align-items: center; justify-content: center;
  }
  #ct-unread-badge.show { display: flex; }
</style>

<!-- â”€â”€ HTML DEL WIDGET â”€â”€ -->
<div id="ct-widget">

  <!-- Ventana del chat -->
  <div id="ct-window">

    <!-- Header -->
    <div class="ct-header">
      <div class="ct-avatar">CT</div>
      <div class="ct-header-info">
        <h4>Soporte CaribeTech</h4>
        <p>
          <span class="ct-status-dot" id="ct-status-dot"></span>
          <span id="ct-status-label">Conectandoâ€¦</span>
        </p>
      </div>
      <button class="ct-close-btn" onclick="ctToggle()">âœ•</button>
    </div>

    <!-- Body -->
    <div class="ct-body">

      <!-- Paso 1: nombre -->
      <div id="ct-name-step">
        <div class="ct-welcome-icon">ğŸ‘‹</div>
        <h3>Â¡Hola! Bienvenido/a</h3>
        <p>Estamos aquÃ­ para ayudarte. Ingresa tu nombre para iniciar el chat.</p>
        <input type="text" id="ct-name-input" placeholder="Tu nombreâ€¦" maxlength="40"
               onkeydown="if(event.key==='Enter') ctStartChat()" />
        <button id="ct-start-btn" onclick="ctStartChat()">Iniciar conversaciÃ³n â†’</button>
      </div>

      <!-- Paso 2: chat -->
      <div id="ct-chat-step">
        <div class="ct-messages" id="ct-messages"></div>
        <div class="ct-typing" id="ct-typing">
          <span></span><span></span><span></span>
        </div>
      </div>

      <!-- Soporte cerrado -->
      <div id="ct-closed-msg">
        <div class="ct-closed-icon">ğŸ•</div>
        <h3>Soporte cerrado</h3>
        <p id="ct-closed-text"></p>
      </div>

    </div>

    <!-- Input -->
    <div class="ct-input-area" id="ct-input-area">
      <input type="text" id="ct-msg-input" placeholder="Escribe un mensajeâ€¦"
             onkeydown="if(event.key==='Enter') ctSendMsg()" />
      <button class="ct-send-btn" onclick="ctSendMsg()">
        <svg viewBox="0 0 24 24">
          <line x1="22" y1="2" x2="11" y2="13"/>
          <polygon points="22 2 15 22 11 13 2 9 22 2"/>
        </svg>
      </button>
    </div>

  </div>

  <!-- BotÃ³n flotante -->
  <button id="ct-fab" onclick="ctToggle()" title="Soporte en vivo">
    <svg id="ct-icon-chat" viewBox="0 0 24 24">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
    </svg>
    <svg id="ct-icon-close" viewBox="0 0 24 24" style="display:none">
      <line x1="18" y1="6" x2="6" y2="18"/>
      <line x1="6" y1="6" x2="18" y2="18"/>
    </svg>
    <div id="ct-unread-badge">0</div>
  </button>

</div>

<!-- â”€â”€ SCRIPT DEL WIDGET â”€â”€ -->
<script>
(function () {

  // â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Cambia estos valores segÃºn tu horario real.
  // apertura y cierre en horas (0-23). 0 y 24 = siempre abierto.
  const HORARIO       = { apertura: 0, cierre: 24 };
  const CHANNEL_OUT   = 'ct-client-to-agent';   // debe coincidir con dashboard.html
  const CHANNEL_IN    = 'ct-agent-to-client';   // debe coincidir con dashboard.html
  const SESSION_KEY   = 'ct_client_session';
  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  let clientId    = null;
  let clientName  = null;
  let messages    = [];
  let widgetOpen  = false;
  let unreadCount = 0;

  const bcOut = new BroadcastChannel(CHANNEL_OUT);
  const bcIn  = new BroadcastChannel(CHANNEL_IN);

  // â”€â”€ Recuperar sesiÃ³n previa â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  (function initSession() {
    try {
      const raw = localStorage.getItem(SESSION_KEY);
      if (raw) {
        const s = JSON.parse(raw);
        clientId   = s.clientId   || null;
        clientName = s.name       || null;
        messages   = s.messages   || [];
      }
    } catch {}
    updateStatus();
  })();

  // â”€â”€ Estado del servicio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function soporteAbierto() {
    const h = new Date().getHours();
    return h >= HORARIO.apertura && h < HORARIO.cierre;
  }

  function updateStatus() {
    const dot   = document.getElementById('ct-status-dot');
    const label = document.getElementById('ct-status-label');
    if (soporteAbierto()) {
      dot.classList.remove('closed');
      label.textContent = 'En lÃ­nea Â· Respuesta inmediata';
    } else {
      dot.classList.add('closed');
      label.textContent = `Cerrado Â· ${HORARIO.apertura}:00â€“${HORARIO.cierre}:00`;
    }
  }

  // â”€â”€ Toggle del widget â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  window.ctToggle = function () {
    widgetOpen = !widgetOpen;
    const win = document.getElementById('ct-window');

    win.classList.toggle('ct-open', widgetOpen);
    document.getElementById('ct-icon-chat').style.display  = widgetOpen ? 'none'  : 'block';
    document.getElementById('ct-icon-close').style.display = widgetOpen ? 'block' : 'none';

    if (widgetOpen) {
      unreadCount = 0;
      const badge = document.getElementById('ct-unread-badge');
      badge.classList.remove('show');
      updateStatus();

      // Si ya hay sesiÃ³n activa, ir directo al chat
      if (clientId && clientName) {
        showChatStep();
      }
    }
  };

  // â”€â”€ Iniciar chat â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  window.ctStartChat = function () {
    const nameEl = document.getElementById('ct-name-input');
    const name   = nameEl.value.trim();

    if (!name) {
      nameEl.style.borderColor = '#ff5c6a';
      nameEl.placeholder = 'Por favor escribe tu nombre';
      setTimeout(() => {
        nameEl.style.borderColor = '';
        nameEl.placeholder = 'Tu nombreâ€¦';
      }, 2000);
      return;
    }

    if (!soporteAbierto()) {
      document.getElementById('ct-name-step').style.display = 'none';
      const closed = document.getElementById('ct-closed-msg');
      closed.style.display = 'flex';
      document.getElementById('ct-closed-text').textContent =
        `Nuestro horario es de ${HORARIO.apertura}:00 a ${HORARIO.cierre}:00. Vuelve pronto.`;
      return;
    }

    // Crear o reutilizar ID de cliente
    if (!clientId) clientId = 'ct-' + Math.random().toString(36).slice(2,10) + Date.now().toString(36);
    clientName = name;
    messages   = [];
    saveSession();

    showChatStep();

    // Mensaje de bienvenida local (no va al dashboard)
    appendLocalMsg('agent', `Â¡Hola ${name}! ğŸ‘‹ Gracias por contactar a CaribeTech. Â¿En quÃ© podemos ayudarte hoy?`);

    // Notificar al dashboard que arrancÃ³ la sesiÃ³n
    bcOut.postMessage({
      clientId,
      name: clientName,
      text: `[Nueva conversaciÃ³n iniciada por: ${name}]`,
      timestamp: new Date().toISOString(),
      isSystem: true
    });
  };

  // â”€â”€ Mostrar paso del chat â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showChatStep() {
    document.getElementById('ct-name-step').style.display   = 'none';
    document.getElementById('ct-closed-msg').style.display  = 'none';
    document.getElementById('ct-chat-step').style.display   = 'flex';
    document.getElementById('ct-input-area').style.display  = 'flex';

    // Renderizar historial
    const container = document.getElementById('ct-messages');
    container.innerHTML = '';
    messages.forEach(m => renderMsg(m));
    container.scrollTop = container.scrollHeight;

    setTimeout(() => document.getElementById('ct-msg-input').focus(), 60);
  }

  // â”€â”€ Enviar mensaje â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  window.ctSendMsg = function () {
    if (!clientId) return;
    const input = document.getElementById('ct-msg-input');
    const text  = input.value.trim();
    if (!text) return;

    const timestamp = new Date().toISOString();
    const msg = { sender: 'user', text, time: timestamp };
    messages.push(msg);
    saveSession();
    renderMsg(msg);
    input.value = '';

    // Enviar al dashboard
    bcOut.postMessage({ clientId, name: clientName, text, timestamp });
  };

  // â”€â”€ Recibir respuesta del agente â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  bcIn.onmessage = function (e) {
    const { clientId: target, text, timestamp } = e.data;
    if (target !== clientId) return;               // no es para esta sesiÃ³n

    const msg = { sender: 'agent', text, time: timestamp || new Date().toISOString() };
    messages.push(msg);
    saveSession();

    document.getElementById('ct-typing').style.display = 'none';
    renderMsg(msg);

    if (!widgetOpen) {
      unreadCount++;
      const badge = document.getElementById('ct-unread-badge');
      badge.textContent = unreadCount;
      badge.classList.add('show');
    }
  };

  // â”€â”€ Render de un mensaje â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function renderMsg(msg) {
    const container = document.getElementById('ct-messages');

    const wrap   = document.createElement('div');
    wrap.className = 'ct-msg-wrap ' + msg.sender;

    const bubble = document.createElement('div');
    bubble.className = 'ct-bubble ' + msg.sender;
    bubble.textContent = msg.text;

    const time = document.createElement('div');
    time.className = 'ct-msg-time';
    time.textContent = fmtTime(msg.time);

    wrap.appendChild(bubble);
    wrap.appendChild(time);
    container.appendChild(wrap);
    container.scrollTop = container.scrollHeight;
  }

  function appendLocalMsg(sender, text) {
    const msg = { sender, text, time: new Date().toISOString() };
    messages.push(msg);
    saveSession();
    renderMsg(msg);
  }

  // â”€â”€ Persistencia â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function saveSession() {
    try {
      localStorage.setItem(SESSION_KEY, JSON.stringify({ clientId, name: clientName, messages }));
    } catch {}
  }

  // â”€â”€ Utilidades â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function fmtTime(iso) {
    if (!iso) return '';
    return new Date(iso).toLocaleTimeString('es-DO', { hour: '2-digit', minute: '2-digit' });
  }

})();
</script>
<!-- ============================================================
     FIN DEL WIDGET DE SOPORTE CARIBETECH
     ============================================================ -->